(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./index.js":
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var wasm_boids__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wasm-boids */ \"./node_modules/wasm-boids/wasm_boids.js\");\n/* harmony import */ var wasm_boids_wasm_boids_bg_wasm__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wasm-boids/wasm_boids_bg.wasm */ \"./node_modules/wasm-boids/wasm_boids_bg.wasm\");\n\n\n\nconst canvas = document.getElementById(\"boids-canvas\");\n\ncanvas.height = window.innerHeight - 100;\ncanvas.width = window.innerWidth;\nconst canvas_left = canvas.getBoundingClientRect().left;\nconst canvas_top = canvas.getBoundingClientRect().top;\n\nconst swarm = wasm_boids__WEBPACK_IMPORTED_MODULE_0__[\"Swarm\"].new(canvas.width, canvas.height);\n\nconst ctx = canvas.getContext('2d');\n\n// Interactivity:\nvar slider_cohesion = document.getElementById(\"slider-cohesion\");\nvar slider_separation = document.getElementById(\"slider-separation\");\nvar slider_alignment = document.getElementById(\"slider-alignment\");\nvar slider_visual_range = document.getElementById(\"slider-visual-range\");\n\nslider_cohesion.oninput = function() {\n  swarm.set_cohesion(this.value / 100);\n};\n\nslider_separation.oninput = function() {\n  swarm.set_separation(this.value / 100);\n};\n\nslider_alignment.oninput = function() {\n  swarm.set_alignment(this.value / 100);\n};\n\nslider_visual_range.oninput = function() {\n  swarm.set_visual_range(this.value / 100);\n};\n\nvar checkbox_mouse_interactivity = document.getElementById(\"checkbox-mouse-interactivity\");\nvar checkbox_follow_fear = document.getElementById(\"checkbox-follow-fear\");\n\ncheckbox_mouse_interactivity.onchange = function() {\n  swarm.set_mouse_interactivity(this.checked);\n};\n\ncheckbox_follow_fear.onchange = function() {\n  swarm.set_follow_fear(this.checked);\n};\n\ndocument.onmousemove = function(e){\n  swarm.set_mouse_position(e.clientX - canvas_left, e.clientY - canvas_top);\n  // console.log(\"mouse location:\", e.clientX, e.clientY)};\n};\n\nconst renderLoop = () => {\n  swarm.tick();\n\n  drawSwarm();\n\n  requestAnimationFrame(renderLoop);\n}\n\n\nconst drawSwarm = () => {\n  const number_boids = swarm.number_boids();\n  const x_ptr = swarm.x();\n  const x_vals = new Float32Array(wasm_boids_wasm_boids_bg_wasm__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, x_ptr, number_boids);\n  const y_ptr = swarm.y();\n  const y_vals = new Float32Array(wasm_boids_wasm_boids_bg_wasm__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, y_ptr, number_boids);\n  const dx_ptr = swarm.dx();\n  const dx_vals = new Float32Array(wasm_boids_wasm_boids_bg_wasm__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, dx_ptr, number_boids);\n  const dy_ptr = swarm.dy();\n  const dy_vals = new Float32Array(wasm_boids_wasm_boids_bg_wasm__WEBPACK_IMPORTED_MODULE_1__[\"memory\"].buffer, dy_ptr, number_boids);\n\n  ctx.beginPath();\n  ctx.fillStyle = \"#AAAAAA\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n  // ctx.fillStyle = \"#FF0000\";\n  for (let k = 0; k < number_boids; ++k) {\n    // ctx.fillRect(x_vals[k], y_vals[k], 10, 10);\n    drawBoid(x_vals[k], y_vals[k], dx_vals[k], dy_vals[k])\n    ctx.stroke();\n  }\n\n};\n\n\nfunction drawBoid(x, y, dx, dy) {\n  const angle = Math.atan2(dy, dx);\n  ctx.translate(x, y);\n  ctx.rotate(angle);\n  ctx.translate(-x, -y);\n  ctx.fillStyle = \"#558cf4\";\n  ctx.beginPath();\n  ctx.moveTo(x, y);\n  ctx.lineTo(x - 15, y + 5);\n  ctx.lineTo(x - 15, y - 5);\n  ctx.lineTo(x, y);\n  ctx.fill();\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n}\n\nrequestAnimationFrame(renderLoop);\n\n\n//# sourceURL=webpack:///./index.js?");

/***/ })

}]);